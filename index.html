<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ™¯é»å°åŠ©æ‰‹</title>
    
    <!-- å¼•å…¥ LXGW WenKai TC å­—é«” (éœé¶©æ–‡æ¥· ç¹é«”ä¸­æ–‡) -->
    <link href="https://fonts.googleapis.com/css2?family=LXGW+WenKai+TC:wght@400;700&display=swap" rel="stylesheet">
    
    <!-- å¼•å…¥ Tailwind CSS æ¡†æ¶ -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* æ‡‰ç”¨ LXGW WenKai TC å­—é«” */
        body {
            font-family: 'LXGW WenKai TC', cursive;
            /* èƒŒæ™¯ç´‹ç†åœ–æ¡ˆ */
            background-image: url('https://www.transparenttextures.com/patterns/pinstripe.png'); 
            background-repeat: repeat;
        }
    </style>
</head>

<body class="p-4 sm:p-8 bg-amber-50">

    <!-- ä¸»å®¹å™¨ï¼šè¨­ç½®æœ€å¤§å¯¬åº¦ã€å±…ä¸­ã€ç™½è‰²èƒŒæ™¯ã€é™°å½±å’Œåœ“è§’ -->
    <div class="max-w-6xl mx-auto bg-white shadow-2xl rounded-2xl p-6 md:p-10">
        
        <!-- æ¨™é¡Œ -->
        <h1 class="text-3xl font-extrabold text-gray-800 mb-6 border-b pb-3">
            ğŸ“ æ™¯é»å°åŠ©æ‰‹
        </h1>

        <!-- ç¯©é¸å€å¡Šï¼šå¼·åˆ¶ä¸¦æ’ (flex)ï¼Œç¢ºä¿æ‰‹æ©Ÿå’Œé›»è…¦ä½ˆå±€ä¸€è‡´ -->
        <div class="flex flex-row gap-4 mb-8 p-4 bg-amber-50 rounded-full shadow-xl">
            
            <!-- åœ°é»ç¯©é¸å™¨ -->
            <div class="w-1/2">
                
                <label for="locationFilter" class="block text-sm font-medium text-amber-700 mb-1">
                    é¸æ“‡åœ°é»
                </label>
                
                <select id="locationFilter" 
                        class="w-full p-2.5 border border-amber-300 bg-white rounded-full shadow-md focus:ring-amber-500 focus:border-amber-500 transition duration-150 ease-in-out hover:shadow-lg hover:scale-[1.01]">
                    <option value="">-- æ‰€æœ‰åœ°é» --</option>
                </select>
            </div>

            <!-- é¡å‹ç¯©é¸å™¨ -->
            <div class="w-1/2">
                
                <label for="typeFilter" class="block text-sm font-medium text-amber-700 mb-1">
                    é¸æ“‡é¡å‹
                </label>
                
                <select id="typeFilter" 
                        class="w-full p-2.5 border border-amber-300 bg-white rounded-full shadow-md focus:ring-amber-500 focus:border-amber-500 transition duration-150 ease-in-out hover:shadow-lg hover:scale-[1.01]">
                    <option value="">-- æ‰€æœ‰é¡å‹ --</option>
                </select>
            </div>
        </div>

        <!-- ç¯©é¸çµæœæ¨™é¡Œ -->
        <h2 class="text-xl font-semibold text-gray-700 mb-4">
            ç¯©é¸çµæœ
            <span id="resultCount" class="text-sm font-normal text-gray-500 ml-2">(å…± 0 ç­†)</span>
        </h2>
        
        <!-- çµæœè¡¨æ ¼å®¹å™¨ -->
        <div id="resultsTableContainer" class="overflow-x-auto shadow-md rounded-2xl">
            <!-- ç¯©é¸çµæœè¡¨æ ¼å°‡ç”± JavaScript æ¸²æŸ“åˆ°æ­¤è™• -->
        </div>
    </div>

    <script>
        // 1. åŸå§‹è³‡æ–™é™£åˆ— (æ¨¡æ“¬è©¦ç®—è¡¨ A, B, C, D æ¬„ä½è³‡æ–™)
        
        // --- æ™¯é»èˆ‡é¤å»³è³‡æ–™æ¸…å–® ---
        // æ ¼å¼ï¼š{ type: 'Aæ¬„-é¡å‹', store: 'Bæ¬„-åº—å®¶', hours: 'Cæ¬„-ç‡Ÿæ¥­æ™‚é–“', location: 'Dæ¬„-åœ°é»' }
        const rawData = [
            { type: 'æ­£é¤é¤å»³', store: 'å…­æ­Œä»™ï¼ˆç‡’è‚‰ï¼‰', hours: '11:00-23:00', location: 'æ–°å®¿' },
            { type: 'æ­£é¤é¤å»³', store: 'æœ¨æ›½è·¯ï¼ˆå£½å–œç‡’ï¼‰å¤šå®¶åˆ†åº—', hours: '17:00-22:00', location: 'æ–°å®¿' },
            { type: 'æ­£é¤é¤å»³', store: 'å’–å•¡è€èˆ– å‹è·¯æœ‰', hours: '06:30-20:00', location: 'æ·ºè‰' },
            { type: 'æ­£é¤é¤å»³', store: 'Suke6 Diner', hours: '08:00-16:00', location: 'æ·ºè‰' },
            { type: 'æ­£é¤é¤å»³', store: 'Misojyu', hours: '08:00-13:00', location: 'æ·ºè‰' },
            { type: 'æ­£é¤é¤å»³', store: 'æµ…è‰ã¨ãã‚é£Ÿå ‚', hours: '09:30-22:00', location: 'æ·ºè‰' },
            { type: 'ç”œé»åº—', store: 'Flipper\'s æ¾€è°·', hours: '9:00-19:00', location: 'æ¾€è°·' },
            { type: 'è³¼ç‰©å•†åº—', store: 'ã«ã—ã‚€ã‚‰ã‚†ã†ã˜è³¼è²·éƒ¨æœ¬åº—', hours: '10:30-20:30', location: 'æ–°å®¿' },
            { type: 'è³¼ç‰©å•†åº—', store: 'æ–°å®¿é«˜å³¶å±‹æ™‚ä»£å»£å ´', hours: '10:30-19:30', location: 'æ–°å®¿' },
            { type: 'è³¼ç‰©å•†åº—', store: 'LUMINE 2', hours: '11:00-21:00', location: 'æ–°å®¿' },
            { type: 'è³¼ç‰©å•†åº—', store: 'Disney Store æ——è‰¦åº—', hours: '10:00-21:00', location: 'æ–°å®¿' },
            { type: 'è³¼ç‰©å•†åº—', store: 'KIDDY LAND æ–°å®¿åº—', hours: '10:30-20:30', location: 'æ–°å®¿' },
            { type: 'è³¼ç‰©å•†åº—', store: 'PUNYUS', hours: '10:00-21:00', location: 'æ¾€è°·' },
            { type: 'è³¼ç‰©å•†åº—', store: 'ä»»å¤©å ‚', hours: '10:00-21:00', location: 'æ¾€è°·' },
            { type: 'è³¼ç‰©å•†åº—', store: 'PARCO', hours: '11:00-21:00', location: 'æ¾€è°·' },
            { type: 'è³¼ç‰©å•†åº—', store: 'LOFT', hours: '11:00-21:00', location: 'æ¾€è°·' },
            { type: 'è§€å…‰æ™¯é»', store: 'æ ¹æ´¥ç¾è¡“é¤¨', hours: '10:00-17:00', location: 'æ¸¯å€' },
            { type: 'è§€å…‰æ™¯é»', store: 'æ–°å®¿æ±å£ã®çŒ«', hours: 'N/A', location: 'æ–°å®¿' },
            { type: 'è§€å…‰æ™¯é»', store: 'æ­Œèˆä¼ç”º', hours: 'N/A', location: 'æ–°å®¿' },
            { type: 'è§€å…‰æ™¯é»', store: 'æ·ºè‰å¯º', hours: 'N/A', location: 'æ·ºè‰' },
            { type: 'è§€å…‰æ™¯é»', store: 'æ˜æ²»ç¥å®®', hours: 'N/A', location: 'æ¾€è°·' },
            { type: 'æ­£é¤é¤å»³', store: 'çƒ¤é­šå®šé£Ÿ ã‚„ã‚“ã‚‚', hours: '11:45â€“13:30', location: 'æ¸¯å€' },
            { type: 'æ­£é¤é¤å»³', store: 'Kastanie Rotiserrie', hours: '16:00â€“21:00', location: 'è¼•äº•æ¾¤' },
            { type: 'è³¼ç‰©å•†åº—', store: 'è¼•äº•æ¾¤ç‹å­è³¼ç‰©å»£å ´', hours: '10:00â€“19:00', location: 'è¼•äº•æ¾¤' },
            { type: 'è§€å…‰æ™¯é»', store: 'èˆŠè¼•äº•æ¾¤éŠ€åº§é€š', hours: 'N/A', location: 'è¼•äº•æ¾¤' },
            { type: 'æ­£é¤é¤å»³', store: 'ç„¼ãé³¥ã²ãã‚‚', hours: '17:00â€“22:00', location: 'è¼•äº•æ¾¤' },
            { type: 'ç”œé»åº—', store: 'ã±ãŠã‚€ è»½äº•æ²¢ ãƒ“ã‚¹ãƒˆãƒ­', hours: '11:00â€“14:30', location: 'è¼•äº•æ¾¤' },
            { type: 'è§€å…‰æ™¯é»', store: 'è¼•äº•æ¾¤è–ä¿ç¾…å¤©ä¸»æ•™å ‚', hours: '09:00â€“16:00', location: 'è¼•äº•æ¾¤' },
            { type: 'ç”œé»åº—', store: 'è¼•äº•æ¾¤æ³•åœ‹éºµåŒ…åº—', hours: '08:00â€“17:00', location: 'è¼•äº•æ¾¤' },
            { type: 'è§€å…‰æ™¯é»', store: 'çŸ³ä¹‹æ•™æœƒ å†…æ‘é‘‘ä¸‰è¨˜å¿µå ‚', hours: '10:00â€“17:00', location: 'è¼•äº•æ¾¤' },
            { type: 'ç”œé»åº—', store: 'Sawamura Bakery & Restaurant Harunire Terrace', hours: '07:00â€“22:00', location: 'è¼•äº•æ¾¤' },
            { type: 'ç”œé»åº—', store: 'ä¸¸å±±å’–å•¡ æ¦†æ¨¹è¡—å°é®åº—', hours: '08:00â€“19:00', location: 'è¼•äº•æ¾¤' },
            { type: 'æ­£é¤é¤å»³', store: 'æ‘æ°‘é£Ÿå ‚', hours: '17:00â€“20:30', location: 'è¼•äº•æ¾¤' },
            { type: 'è§€å…‰æ™¯é»', store: 'æ¦†æ¨¹è¡—å°é®', hours: 'N/A', location: 'è¼•äº•æ¾¤' },
            { type: 'æ­£é¤é¤å»³', store: 'ã‹ã¾ã©ç‚Šãã”é£¯ å¾¡å¨', hours: '07:15â€“14:15', location: 'è¼•äº•æ¾¤' },
            { type: 'è§€å…‰æ™¯é»', store: 'å°è«¸åŸ', hours: '09:00â€“17:00', location: 'å°è«¸' },
            { type: 'è§€å…‰æ™¯é»', store: 'å¸ƒå¼•è¦³éŸ³é‡ˆå°Šå¯º', hours: 'N/A', location: 'å°è«¸' },
            { type: 'è§€å…‰æ™¯é»', store: 'ä¸Šç”°åŸ äºŒã®ä¸¸è·¡', hours: 'N/A', location: 'ä¸Šç”°' },
            { type: 'æ­£é¤é¤å»³', store: 'Ramen Misoya', hours: '11:00â€“00:00', location: 'é•·é‡' },
            { type: 'æ­£é¤é¤å»³', store: 'å¤è¹Ÿé¤å»³ è—¤å±‹å¾¡æœ¬é™³', hours: '11:00â€“15:00ã€17:30â€“21:30', location: 'é•·é‡' },
            { type: 'è§€å…‰æ™¯é»', store: 'ä¿¡å· å–„å…‰å¯º ä»²è¦‹ä¸–é€š', hours: 'N/A', location: 'é•·é‡' },
            { type: 'è§€å…‰æ™¯é»', store: 'åŸå±±å…¬åœ’', hours: 'N/A', location: 'é•·é‡' },
            { type: 'è§€å…‰æ™¯é»', store: 'å–„å…‰å¯º', hours: '06:00â€“16:00', location: 'é•·é‡' },
            { type: 'è§€å…‰æ™¯é»', store: 'æˆ¸éš ç¥ç¤¾', hours: 'N/A', location: 'é•·é‡' },
            { type: 'è§€å…‰æ™¯é»', store: 'åœ°ç„è°·é‡çŒ¿å…¬è‹‘', hours: '09:00â€“16:00', location: 'é•·é‡' },
            { type: 'ç”œé»åº—', store: 'å°å¸ƒæ–½å ‚', hours: '09:00â€“17:00', location: 'å°å¸ƒæ–½' },
            { type: 'æ­£é¤é¤å»³', store: 'å°å¸ƒæ–½ å¯„ã‚Šä»˜ãæ–™ç† è”µéƒ¨', hours: '11:00â€“22:00', location: 'å°å¸ƒæ–½' },
            { type: 'è³¼ç‰©å•†åº—', store: 'è‡ªåœ¨å±‹', hours: '09:30â€“17:30', location: 'å°å¸ƒæ–½' },
            { type: 'è³¼ç‰©å•†åº—', store: 'è¾²ç”£ç‰©ç›´å£²æ‰€ ã‚ãã•ã‚“', hours: '09:30â€“16:30', location: 'å°å¸ƒæ–½' },
            { type: 'è§€å…‰æ™¯é»', store: 'å²©æ¾é™¢', hours: '09:00â€“16:00', location: 'å°å¸ƒæ–½' },
            { type: 'è§€å…‰æ™¯é»', store: 'åŒ—é½‹é¤¨', hours: '09:00â€“17:00', location: 'å°å¸ƒæ–½' },
            { type: 'è§€å…‰æ™¯é»', store: 'åŸå±±å…¬åœ’', hours: 'N/A', location: 'æ¾æœ¬å¸‚' },
            { type: 'è§€å…‰æ™¯é»', store: 'æ—§é–‹æ™ºå­¦æ ¡æ ¡èˆ', hours: '09:00â€“17:00', location: 'æ¾æœ¬å¸‚' },
            { type: 'è§€å…‰æ™¯é»', store: 'æ¾æœ¬åŸ', hours: '08:30â€“16:30', location: 'æ¾æœ¬å¸‚' },
            { type: 'è§€å…‰æ™¯é»', store: 'å››æŸ±ç¥ç¤¾', hours: 'N/A', location: 'æ¾æœ¬å¸‚' },
            { type: 'æ­£é¤é¤å»³', store: 'æ™‚ä»£é…ã‚Œã®æ´‹é£Ÿå±‹ãŠããªå ‚', hours: '11:00â€“15:00, 17:30â€“20:30', location: 'æ¾æœ¬å¸‚' },
            { type: 'æ­£é¤é¤å»³', store: 'éººåŒ ä½è”µ', hours: '11:30â€“15:00, 17:30â€“22:00', location: 'æ¾æœ¬å¸‚' },
            { type: 'è³¼ç‰©å•†åº—', store: 'Aeon Mall Matsumoto', hours: '10:00â€“21:00', location: 'æ¾æœ¬å¸‚' },
            { type: 'è§€å…‰æ™¯é»', store: 'å¼˜æ³•å±±å¤å¢³', hours: 'N/A', location: 'æ¾æœ¬å¸‚' },
            { type: 'è§€å…‰æ™¯é»', store: 'å¥ˆè‰¯äº•å®¿', hours: 'N/A', location: 'æ¾æœ¬å¸‚' },
            { type: 'è§€å…‰æ™¯é»', store: 'è«è¨ªå¤§ç¤¾', hours: 'N/A', location: 'è«è¨ªç”º' },
            { type: 'è§€å…‰æ™¯é»', store: 'èµ¤ç ‚å´å…¬åœ’', hours: 'N/A', location: 'è«è¨ªç”º' },
            { type: 'è§€å…‰æ™¯é»', store: 'ç«‹çŸ³å…¬åœ’', hours: 'N/A', location: 'è«è¨ªç”º' },
            { type: 'è§€å…‰æ™¯é»', store: 'å¤©ä¸Šå±±å…¬åœ’çºœè»Š', hours: '08:30â€“18:00', location: 'å¯Œå£«æ²³å£æ¹–ç”º' },
            { type: 'æ­£é¤é¤å»³', store: 'é¤ºé£¥è— æ­¥æˆ æ²³å£æ¹–åº—', hours: '11:00â€“20:30', location: 'å¯Œå£«æ²³å£æ¹–ç”º' },
            { type: 'ç”œé»åº—', store: 'æœ¨æ‘å±‹å¸ƒä¸', hours: '10:00â€“19:00', location: 'å¯Œå£«æ²³å£æ¹–ç”º' },
            { type: 'è§€å…‰æ™¯é»', store: 'å¯Œå£«æ€¥ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ãƒ“ãƒ« Q-STA', hours: '10:00â€“20:00', location: 'å¯Œå£«æ²³å£æ¹–ç”º' },
            { type: 'è§€å…‰æ™¯é»', store: 'æ–°å€‰å±±æ·ºé–“å…¬åœ’', hours: 'N/A', location: 'å¯Œå£«æ²³å£æ¹–ç”º' },
            { type: 'è§€å…‰æ™¯é»', store: 'åŒ—å£æœ¬å®®å¯Œå£«æ·ºé–“ç¥ç¤¾', hours: '08:30â€“16:50', location: 'å¯Œå£«æ²³å£æ¹–ç”º' },
            { type: 'ç”œé»åº—', store: 'Chiffon Fuji', hours: '10:00â€“18:00', location: 'å¯Œå£«æ²³å£æ¹–ç”º' },
        ];
        // --- é™£åˆ—çµå°¾ ---


        // 2. ç²å– DOM å…ƒç´ 
        const locationFilter = document.getElementById('locationFilter');
        const typeFilter = document.getElementById('typeFilter');
        const resultsTableContainer = document.getElementById('resultsTableContainer');
        const resultCountSpan = document.getElementById('resultCount');

        // å®šç¾©é¡å‹èˆ‡å°æ‡‰åœ–ç¤ºçš„æ˜ å°„
        const typeIcons = {
            'æ­£é¤é¤å»³': 'ğŸ´', // åˆ€å‰
            'ç”œé»åº—': 'ğŸ°',    // è›‹ç³•
            'è³¼ç‰©å•†åº—': 'ğŸ›ï¸',  // è³¼ç‰©è¢‹
            'è§€å…‰æ™¯é»': 'â›©ï¸',  // é³¥å±…
            // å¦‚æœæœ‰å…¶ä»–é¡å‹ï¼Œå¯ä»¥åœ¨é€™è£¡æ·»åŠ 
        };
        
        // 3. è‡ªå®šç¾©åœ°é»é †åº (è¼•äº•æ¾¤ç‚ºèµ·é»ï¼Œå¾€é•·é‡æ–¹å‘)
        const customLocationOrder = [
            'è¼•äº•æ¾¤', // ç¬¬ä¸€ç«™ï¼šè¼•äº•æ¾¤
            'å°è«¸', 'ä¸Šç”°', 'é•·é‡', 'å°å¸ƒæ–½', // é•·é‡å‘¨é‚Š
            'æ¾æœ¬å¸‚', 'è«è¨ªç”º', // æ¾æœ¬åŠè«è¨ª
            'å¯Œå£«æ²³å£æ¹–ç”º', // å¯Œå£«å±±å‘¨é‚Š
            'æ–°å®¿', 'æ·ºè‰', 'æ¾€è°·', 'æ¸¯å€' // æœ€å¾Œå›åˆ°æ±äº¬åŠå…¶å‘¨é‚Š
        ];


        /**
         * 4. å¡«å……ä¸‹æ‹‰é¸å–®é¸é …
         * @param {HTMLElement} selectElement - è¦å¡«å……çš„ <select> å…ƒç´ 
         * @param {string} key - åŸå§‹è³‡æ–™ä¸­è¦æå–çš„éµå ('location' æˆ– 'type')
         * @param {string} dependencyValue - ä¾è³´çš„ç¯©é¸å€¼ (ä¾‹å¦‚: å·²ç¶“é¸æ“‡çš„åœ°é»)ã€‚è‹¥ç‚ºç©ºå­—ä¸²ï¼Œå‰‡ä¸é€²è¡Œä¾è³´ç¯©é¸ã€‚
         */
        function populateFilters(selectElement, key, dependencyValue = "") {
            // æ¸…ç©ºèˆŠçš„é¸é …ï¼Œä½†ä¿ç•™ "æ‰€æœ‰é¸é …"
            const defaultOptionText = `-- æ‰€æœ‰${key === 'location' ? 'åœ°é»' : 'é¡å‹'} --`;
            
            // æ‰¾å‡ºèˆ‡ dependencyValue ç›¸é—œçš„è³‡æ–™å­é›†
            // å¦‚æœ dependencyValue ä¸ç‚ºç©ºï¼Œå‰‡éæ¿¾è³‡æ–™ä»¥å»ºç«‹é€£å‹•æ¸…å–®
            const filteredData = dependencyValue 
                ? rawData.filter(item => {
                    // æª¢æŸ¥è³‡æ–™çš„å¦ä¸€å€‹éµæ˜¯å¦ç­‰æ–¼ä¾è³´å€¼
                    const otherKey = key === 'location' ? 'type' : 'location';
                    return item[otherKey] === dependencyValue;
                })
                : rawData; // å¦‚æœæ²’æœ‰ä¾è³´å€¼ï¼Œå‰‡ä½¿ç”¨æ‰€æœ‰è³‡æ–™
            
            // å¾å­é›†ä¸­ç²å–å”¯ä¸€çš„é¸é …å€¼
            const uniqueValues = new Set(filteredData.map(item => item[key]));
            
            let valuesToDisplay;

            if (key === 'location') {
                // åœ°é»ä½¿ç”¨è‡ªå®šç¾©é †åº
                const presentCustomOrder = customLocationOrder.filter(location => uniqueValues.has(location));
                const otherLocations = Array.from(uniqueValues)
                                        .filter(location => !customLocationOrder.includes(location))
                                        .sort(); 
                valuesToDisplay = presentCustomOrder.concat(otherLocations);

            } else {
                // é¡å‹ä¿æŒå­—æ¯æ’åº
                valuesToDisplay = Array.from(uniqueValues).sort();
            }

            // é‡æ–°å»ºæ§‹ä¸‹æ‹‰é¸å–®å…§å®¹
            let htmlOptions = `<option value="">${defaultOptionText}</option>`;
            const selectedValue = selectElement.value; // ä¿ç•™ç•¶å‰çš„é¸æ“‡å€¼
            
            valuesToDisplay.forEach(value => {
                if (value) {
                    const isSelected = value === selectedValue ? 'selected' : '';
                    htmlOptions += `<option value="${value}" ${isSelected}>${value}</option>`;
                }
            });

            // æª¢æŸ¥åŸå…ˆé¸ä¸­çš„å€¼æ˜¯å¦ä»ç„¶æœ‰æ•ˆï¼Œå¦‚æœç„¡æ•ˆå‰‡é‡ç½®
            if (selectedValue && !uniqueValues.has(selectedValue)) {
                selectElement.value = "";
            }
            
            selectElement.innerHTML = htmlOptions;
        }

        /**
         * 5. åŸ·è¡Œé€£å‹•ç¯©é¸å’Œæ¸²æŸ“
         * * ä¿®æ­£é‚è¼¯ï¼šåœ°é»æ¸…å–®æ°¸é é¡¯ç¤ºæ‰€æœ‰é¸é …ï¼ˆä¸ä¾è³´é¡å‹ï¼‰ï¼›é¡å‹æ¸…å–®åªé¡¯ç¤ºæ‰€é¸åœ°é»ä¸­åŒ…å«çš„é¡å‹ã€‚
         */
        function filterDataAndRender() {
            // å–å¾—ç›®å‰é¸å®šçš„å€¼
            const selectedLocation = locationFilter.value;
            const selectedType = typeFilter.value;

            // æ­¥é©Ÿ 1: æ›´æ–°é€£å‹•ç¯©é¸å™¨
            
            // 1a. åœ°é» (Location) ä¸‹æ‹‰é¸å–®ç¨ç«‹æ›´æ–°ï¼Œä¸ä¾è³´é¡å‹é¸æ“‡ï¼Œæ°¸é é¡¯ç¤ºæ‰€æœ‰åœ°é»
            // å‚³å…¥ "" è¡¨ç¤ºåœ°é»æ¸…å–®ç¸½æ˜¯åŸºæ–¼æ‰€æœ‰åŸå§‹è³‡æ–™ä¾†ç”Ÿæˆ
            populateFilters(locationFilter, 'location', "");


            // 1b. æ ¹æ“šé¸ä¸­çš„åœ°é» (Location)ï¼Œæ›´æ–°é¡å‹ (Type) ä¸‹æ‹‰é¸å–®çš„é¸é …
            // (é¡å‹å—åœ°é»é¸æ“‡å½±éŸ¿ã€‚å¦‚æœ selectedLocation æ˜¯ç©ºå­—ä¸²ï¼ŒpopulateFilters æœƒä½¿ç”¨æ‰€æœ‰è³‡æ–™)
            populateFilters(typeFilter, 'type', selectedLocation);
            
            // ***æ³¨æ„ï¼šç”±æ–¼é¡å‹æ¸…å–®å·²ç¶“æ›´æ–°ï¼Œå¦‚æœå…ˆå‰é¸å®šçš„ selectedType ä¸å†æ˜¯æœ‰æ•ˆé¸é …ï¼Œ
            // populateFilters å…§éƒ¨æœƒè‡ªå‹•å°‡ selectElement.value é‡è¨­ç‚º ""ã€‚***


            // æ­¥é©Ÿ 2: åŸ·è¡Œæœ€çµ‚çš„è³‡æ–™ç¯©é¸ (æ¨¡æ“¬ Google Sheets çš„ =FILTER(...) é‚è¼¯)
            const filteredData = rawData.filter(item => {
                const locationMatch = selectedLocation === "" || item.location === selectedLocation;
                const typeMatch = selectedType === "" || item.type === selectedType;

                return locationMatch && typeMatch;
            });

            // æ­¥é©Ÿ 3: æ¸²æŸ“çµæœ
            renderResults(filteredData);
        }

        // 6. å°‡çµæœæ¸²æŸ“æˆ HTML è¡¨æ ¼ (ç•¥)
        function renderResults(data) {
            resultCountSpan.textContent = `(å…± ${data.length} ç­†)`;

            if (data.length === 0) {
                resultsTableContainer.innerHTML = `
                    <p class="p-4 text-center text-gray-500 bg-amber-100 rounded-lg">
                        æ‰¾ä¸åˆ°ç¬¦åˆæ¢ä»¶çš„é …ç›®ã€‚è«‹å˜—è©¦ä¸åŒçš„ç¯©é¸çµ„åˆã€‚
                    </p>
                `;
                return;
            }

            let html = `
                <table class="min-w-full divide-y divide-gray-200">
                    
                    <thead class="bg-amber-600 text-white">
                        <tr>
                            <th class="px-6 py-3 text-left text-xs font-bold uppercase tracking-wider rounded-tl-2xl">é¡å‹</th>
                            <th class="px-6 py-3 text-left text-xs font-bold uppercase tracking-wider">åº—å®¶</th>
                            <th class="px-6 py-3 text-left text-xs font-bold uppercase tracking-wider">ç‡Ÿæ¥­æ™‚é–“</th>
                            <th class="px-6 py-3 text-left text-xs font-bold uppercase tracking-wider rounded-tr-2xl">åœ°é»</th>
                        </tr>
                    </thead>
                    <tbody class="bg-white divide-y divide-gray-200">
            `;

            data.forEach((item, index) => {
                // æ ¹æ“šé¡å‹çµ¦äºˆä¸åŒçš„èƒŒæ™¯é¡è‰²ï¼Œå¢åŠ å¯è®€æ€§
                const rowClass = index % 2 === 0 ? 'bg-gray-50' : 'bg-white';
                
                // ç²å–å°æ‡‰çš„åœ–ç¤ºï¼Œå¦‚æœæ²’æœ‰å‰‡ä½¿ç”¨é è¨­åœ–ç¤º
                const icon = typeIcons[item.type] || 'â„¹ï¸'; // 'â„¹ï¸' æ˜¯é è¨­è³‡è¨Šåœ–ç¤º

                html += `
                    
                    <tr class="${rowClass} hover:bg-amber-100 transition duration-150">
                        <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">
                            ${icon} ${item.type}
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-700">${item.store}</td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-700">${item.hours}</td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-700 font-semibold">${item.location}</td>
                    </tr>
                `;
            });

            html += `
                    </tbody>
                </table>
            `;

            resultsTableContainer.innerHTML = html;
        }


        // 7. åˆå§‹åŒ–è¨­å®šå’Œäº‹ä»¶ç›£è½
        window.onload = function() {
            // ç¬¬ä¸€æ¬¡åˆå§‹åŒ–æ™‚ï¼Œåœ°é»å’Œé¡å‹æ¸…å–®éƒ½ä»¥æ‰€æœ‰è³‡æ–™ç‚ºåŸºç¤
            populateFilters(locationFilter, 'location');
            populateFilters(typeFilter, 'type');

            // ç¶å®šäº‹ä»¶ç›£è½å™¨ (ç•¶ä¸‹æ‹‰é¸å–®æ”¹è®Šæ™‚ï¼Œé‡æ–°ç¯©é¸ä¸¦æ¸²æŸ“)
            locationFilter.addEventListener('change', filterDataAndRender);
            typeFilter.addEventListener('change', filterDataAndRender);

            // é¦–æ¬¡åŠ è¼‰æ™‚æ¸²æŸ“æ‰€æœ‰è³‡æ–™
            filterDataAndRender();
        };

    </script>
</body>
</html>
